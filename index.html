<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conlang Generator</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>Conlang Generator</h1>
    <label for="language-select"><strong>Choose a language:</strong></label>
    <select id="language-select"></select>
    <button id="toggle-affricates" class="collapsible-toggle" type="button">Show Affricates</button>
    <button id="toggle-glides" class="collapsible-toggle" type="button">Show Glides</button>
    <button id="toggle-nonpulmonic" class="collapsible-toggle" type="button">Show Nonpulmonic</button>
    <div id="ipa-tables-row">
        <table id="consonantTable">
            <caption>
                <h2>Consonants</h2>
            </caption>
            <thead>
                <tr>
                    <th class="hide"></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Bilabial</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Labiodental</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Dental</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Alveolar</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Postalveolar</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Alveolo-palatal</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Retroflex</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Palatal</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Velar</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Uvular</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Pharyngeal</span></th>
                    <th colspan="2" class="hide"><span class="ipa-header-rot">Glottal</span></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th class="hide">Plosive</th>
                    <td class="ipa-btn">p</td>
                    <td class="ipa-btn">b</td>
                    <td class="ipa-btn">p̪</td>
                    <td class="ipa-btn">b̪</td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">t</td>
                    <td class="ipa-btn">d</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ʈ</td>
                    <td class="ipa-btn">ɖ</td>
                    <td class="ipa-btn">c</td>
                    <td class="ipa-btn">ɟ</td>
                    <td class="ipa-btn">k</td>
                    <td class="ipa-btn">g</td>
                    <td class="ipa-btn">q</td>
                    <td class="ipa-btn">ɢ</td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ʔ</td>
                    <td></td>
                </tr>
                <tr>
                    <th class="hide">Nasal</th>
                    <td class="ipa-btn">m̥</td>
                    <td class="ipa-btn">m</td>
                    <td class="ipa-btn">ɱ̥</td>
                    <td class="ipa-btn">ɱ</td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">n̥</td>
                    <td class="ipa-btn">n</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ɳ̊</td>
                    <td class="ipa-btn">ɳ</td>
                    <td class="ipa-btn">ɲ̊</td>
                    <td class="ipa-btn">ɲ</td>
                    <td class="ipa-btn">ŋ̊</td>
                    <td class="ipa-btn">ŋ</td>
                    <td class="ipa-btn">ɴ̥</td>
                    <td class="ipa-btn">ɴ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th class="hide">Trill</th>
                    <td class="ipa-btn">ʙ̥</td>
                    <td class="ipa-btn">ʙ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">r̥</td>
                    <td class="ipa-btn">r</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ʀ̥</td>
                    <td class="ipa-btn">ʀ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th class="hide">Tap/Flap</th>
                    <td class="ipa-btn">ⱱ̥</td>
                    <td class="ipa-btn">ⱱ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ɾ̥</td>
                    <td class="ipa-btn">ɾ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ɽ̊</td>
                    <td class="ipa-btn">ɽ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th class="hide">Fricative</th>
                    <td class="ipa-btn">ɸ</td>
                    <td class="ipa-btn">β</td>
                    <td class="ipa-btn">f</td>
                    <td class="ipa-btn">v</td>
                    <td class="ipa-btn">θ</td>
                    <td class="ipa-btn">ð</td>
                    <td class="ipa-btn">s</td>
                    <td class="ipa-btn">z</td>
                    <td class="ipa-btn">ʃ</td>
                    <td class="ipa-btn">ʒ</td>
                    <td class="ipa-btn">ɕ</td>
                    <td class="ipa-btn">ʑ</td>
                    <td class="ipa-btn">ʂ</td>
                    <td class="ipa-btn">ʐ</td>
                    <td class="ipa-btn">ç</td>
                    <td class="ipa-btn">ʝ</td>
                    <td class="ipa-btn">x</td>
                    <td class="ipa-btn">ɣ</td>
                    <td class="ipa-btn">χ</td>
                    <td class="ipa-btn">ʁ</td>
                    <td class="ipa-btn">ħ</td>
                    <td class="ipa-btn">ʕ</td>
                    <td class="ipa-btn">h</td>
                    <td class="ipa-btn">ɦ</td>
                </tr>
                <tr>
                    <th class="hide">Lat. Fricative</th>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ɬ</td>
                    <td class="ipa-btn">ɮ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th class="hide">Approximant</th>
                    <td class="ipa-btn">ʋ̥</td>
                    <td class="ipa-btn">ʋ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ɹ̥</td>
                    <td class="ipa-btn">ɹ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ɻ̥</td>
                    <td class="ipa-btn">ɻ</td>
                    <td class="ipa-btn">j̊</td>
                    <td class="ipa-btn">j</td>
                    <td class="ipa-btn">ɰ̥</td>
                    <td class="ipa-btn">ɰ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <th class="hide">Lat. Approximant</th>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">l̥</td>
                    <td class="ipa-btn">l</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td class="ipa-btn">ɭ̥</td>
                    <td class="ipa-btn">ɭ</td>
                    <td class="ipa-btn">ʎ̥</td>
                    <td class="ipa-btn">ʎ</td>
                    <td class="ipa-btn">ʟ̥</td>
                    <td class="ipa-btn">ʟ</td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
        <table id="vowelTable">
            <caption>
                <h2>Vowels</h2>
            </caption>
            <thead>
                <tr>
                    <th class="hide"></th>
                    <th colspan=2 class="hide">Front</th>
                    <th colspan=2 class="hide">Central</th>
                    <th colspan=2 class="hide">Back</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <th class="hide">High</th>
                    <td class="ipa-btn">i</td>
                    <td class="ipa-btn">y</td>
                    <td class="ipa-btn">ɨ</td>
                    <td class="ipa-btn">ʉ</td>
                    <td class="ipa-btn">ɯ</td>
                    <td class="ipa-btn">u</td>
                </tr>
                <tr>
                    <th class="hide">High-mid</th>
                    <td class="ipa-btn">e</td>
                    <td class="ipa-btn">ø</td>
                    <td class="ipa-btn">ɘ</td>
                    <td class="ipa-btn">ɵ</td>
                    <td class="ipa-btn">ɤ</td>
                    <td class="ipa-btn">o</td>
                </tr>
                <tr>
                    <th class="hide">Mid</th>
                    <td class="ipa-btn">e̞</td>
                    <td class="ipa-btn">ø̞</td>
                    <td class="ipa-btn" colspan=2>ə</td>
                    <td class="ipa-btn">o̞</td>
                    <td class="ipa-btn">ɤ̞</td>
                </tr>
                <tr>
                    <th class="hide">Low-mid</th>
                    <td class="ipa-btn">ɛ</td>
                    <td class="ipa-btn">œ</td>
                    <td class="ipa-btn">ɜ</td>
                    <td class="ipa-btn">ɞ</td>
                    <td class="ipa-btn">ʌ</td>
                    <td class="ipa-btn">ɔ</td>
                </tr>
                <tr>
                    <th class="hide">Low</th>
                    <td class="ipa-btn">æ</td>
                    <td class="ipa-btn">a</td>
                    <td class="ipa-btn" colspan=2>ɐ</td>
                    <td class="ipa-btn">ɑ</td>
                    <td class="ipa-btn">ɒ</td>
                </tr>
            </tbody>
        </table>
        <!-- NEW: Glides chart -->
        <table id="glideTable" style="margin-top:1em;">
            <caption>
                <h2>Glides</h2>
            </caption>
            <tbody>
                <tr>
                    <td class="ipa-btn">j</td>
                    <td class="ipa-btn">w</td>
                    <td class="ipa-btn">ɥ</td>
                    <td class="ipa-btn">ɰ</td>
                </tr>
            </tbody>
        </table>
        <!-- NEW: Nonpulmonic consonants chart -->
        <table id="nonpulmonicTable" style="margin-top:1em;">
            <caption>
                <h2>Nonpulmonic Consonants</h2>
            </caption>
            <tbody>
                <tr>
                    <td class="ipa-btn">ʘ</td>
                    <td class="ipa-btn">ǀ</td>
                    <td class="ipa-btn">ǃ</td>
                    <td class="ipa-btn">ǂ</td>
                    <td class="ipa-btn">ǁ</td>
                    <td class="ipa-btn">ɓ</td>
                    <td class="ipa-btn">ɗ</td>
                    <td class="ipa-btn">ʄ</td>
                    <td class="ipa-btn">ɠ</td>
                    <td class="ipa-btn">ʛ</td>
                    <td class="ipa-btn">ʼ</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div id="prosody-rules-row" style="display: flex; flex-direction: row; gap: 32px; align-items: flex-start; margin-bottom: 1.5em;">
        <div class="prosody-col">
            <h2>Stress and Prosody</h2>
            <p>
                <label>Accent System:
                    <select id="accentType" onchange="updateAccentUI()">
                        <option value="stress" selected>Stress</option>
                        <option value="tone">Tone</option>
                    </select>
                </label>
            </p>
            <div id="stressSettings">
                <p><label><input type="checkbox" id="enableStress" checked> Mark stress</label></p>
                <p>
                    <label>Stress Rule:
                        <select id="stressRule">
                            <option value="first">First syllable</option>
                            <option value="last">Last syllable</option>
                            <option value="penult">Penultimate syllable</option>
                            <option value="variable">Variable</option>
                        </select>
                    </label>
                </p>
            </div>
        </div>
        <div class="prosody-col">
            <h2>Tone System</h2>
            <select id="toneCount" onchange="updateToneOptions()">
                <option value="0">No tones</option>
                <option value="1">1 tone</option>
                <option value="2">2 tones</option>
                <option value="3" selected>3 tones</option>
                <option value="4">4 tones</option>
                <option value="5">5 tones</option>
            </select>
            <div id="toneOptions" class="tone-box"></div>
        </div>
        <div class="prosody-col">
            <h2>Phonotactic Rules</h2>
            <div id="tagEditor" class="tag-editor">
                <span contenteditable="true" class="tag-input" id="tagInput"></span>
            </div>
            <p>
                <label>Syllables:
                    <input type="number" id="syllableCount" value="1" min="1" max="10">
                </label>
            </p>
            <p>
                <label>Onset:
                    <input type="text" id="onsetConstraint" value="C">
                </label>
                <label>Nucleus:
                    <input type="text" id="nucleusConstraint" value="V">
                </label>
                <label>Coda:
                    <input type="text" id="codaConstraint" value="(C)">
                </label>
            </p>
        </div>
        <div class="prosody-col">
            <h2>Language Typology</h2>
            <select id="typology">
                <option value="isolating">Isolating</option>
                <option value="agglutinative">Agglutinative</option>
                <option value="fusional">Fusional</option>
                <option value="polysynthetic">Polysynthetic</option>
            </select>
            <label style="display:block; margin-top:1em;">Word Order:
                <select id="wordOrder">
                    <option value="SVO">SVO</option>
                    <option value="SOV">SOV</option>
                    <option value="VSO">VSO</option>
                    <option value="VOS">VOS</option>
                    <option value="OVS">OVS</option>
                    <option value="OSV">OSV</option>
                </select>
            </label>
        </div>
    </div>
    <div id="language-features" class="feature-panel">
        <h3>Typological Features</h3>
        <table id="features-table">
            <tbody>
                <!-- Feature rows will be populated by JS -->
            </tbody>
        </table>
    </div>
    <h2>Output Types</h2>
    <select id="outputType" multiple>
        <option value="swadesh">Swadesh List</option>
        <option value="udhr">Universal Declaration of Human Rights</option>
        <option value="basics">Basic Sentences</option>
    </select>
    <br>
    <button onclick="generateConlang()">Generate Conlang</button>
    <button id="generateFromWALS" style="margin-left:10px">Generate from WALS/PHOIBLE</button>
    <button id="randomize-features" type="button">Randomize Features by WALS Frequency</button>
    <div id="output"></div>
    <script src="chance.js"></script>
    <script src="main.js"></script>
</body>

</html>